{{- $pc := .Page.Site.Config.Privacy.YouTube -}}
{{- if not $pc.Disable -}}
{{- $ytHost := cond $pc.PrivacyEnhanced  "www.youtube-nocookie.com" "www.youtube.com" -}}
{{- $id := .Get "id" | default (.Get 0) -}}
{{- $class := .Get "class" | default (.Get 1) -}}
{{- $title := .Get "title" | default "YouTube Video" }}
{{- $isEmbed := .Get "embed" -}}
{{- if or (eq $isEmbed true) (eq $isEmbed "true") }}
<div {{ with $class }}class="{{ . }}"{{ else }}style="position: relative; padding-bottom: 56.25%; height: 0; width: 100%; overflow: hidden;"{{ end }}>
  <iframe src="https://{{ $ytHost }}/embed/{{ $id }}{{ with .Get "autoplay" }}{{ if eq . "true" }}?autoplay=1{{ end }}{{ end }}" {{ if not $class }}style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" {{ end }}allowfullscreen title="{{ $title }}"></iframe>
</div>
{{- else -}}
<div style="position: relative; z-index: 0;">
    <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 99 99" fill="#fff" style="position: absolute; z-index: 2; left: calc(50% - 32px); top: calc(50% - 32px); width: 64px; height: 64px; opacity: 0.9; pointer-events: auto; cursor: pointer; filter: drop-shadow(0 0 4px rgba(0, 0, 0, 0.4));" onclick="getYoutubeIframe(event, 'https://{{ $ytHost }}/embed/{{ $id }}?autoplay=1')">
        <g>
        <rect height="99.6582" opacity="0" width="99.6094" x="0" y="0"/>
        <path d="M49.8047 99.6094C77.0508 99.6094 99.6094 77.002 99.6094 49.8047C99.6094 22.5586 77.002 0 49.7559 0C22.5586 0 0 22.5586 0 49.8047C0 77.002 22.6074 99.6094 49.8047 99.6094ZM49.8047 91.3086C26.7578 91.3086 8.34961 72.8516 8.34961 49.8047C8.34961 26.7578 26.709 8.30078 49.7559 8.30078C72.8027 8.30078 91.3086 26.7578 91.3086 49.8047C91.3086 72.8516 72.8516 91.3086 49.8047 91.3086ZM40.6738 68.8965L68.457 52.4414C70.5078 51.2695 70.459 48.4375 68.457 47.2168L40.6738 30.7617C38.5742 29.541 35.791 30.4688 35.791 32.8613L35.791 66.7969C35.791 69.1406 38.3789 70.2637 40.6738 68.8965Z" fill-opacity="0.85"/>
        </g>
    </svg>

    {{- $thumbnail := resources.GetRemote (printf "https://i.ytimg.com/vi/%s/hq720.jpg" $id) -}}
    <img tabindex="0" role="link" aria-role="link" src="{{ $thumbnail.Permalink }}" onclick="getYoutubeIframe(event, 'https://{{ $ytHost }}/embed/{{ $id }}?autoplay=1')" style="max-width: 100%; max-height: auto; z-index: 1; transition: opacity 0.150s ease-out; cursor: pointer;">
</div>
{{- end -}}
{{ end -}}
